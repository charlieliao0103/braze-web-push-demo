<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braze Web Push Integration</title>
    <style>
        /* Keep your existing styles */
    </style>
    
    <!-- Braze SDK with fallback -->
    <script src="https://js.appboycdn.com/web-sdk/5.8/braze.min.js" 
            integrity="sha384-2ZJ1W4H8x4XqDk0cwcYAAILf3D9KRO8q1q0XDD6sp5owQ+J5F6DlE2FUXy1Z7Hm"
            crossorigin="anonymous"
            async>
    </script>
</head>
<body>
    <div id="container">
        <h1>Braze Integration Status</h1>
        <div id="status">Initializing Braze...</div>
        <button onclick="testConnection()" disabled>Test Connection</button>
        <div id="testResults"></div>
    </div>

    <script>
        // Braze Configuration
        const BRAZE_CONFIG = {
            apiKey: '84e848cb-2923-4629-bd23-e6e4155615bd',
            endpoint: 'sdk.iad-03.braze.com',
            restApiKey: 'f512da0e-d48f-4f78-9e20-49d310b697bd'
        };

        // Initialize when SDK loads
        window.brazeAsyncInit = function() {
            braze.initialize(BRAZE_CONFIG.apiKey, {
                baseUrl: `https://${BRAZE_CONFIG.endpoint}`,
                serviceWorkerLocation: '/sw.js',
                enableLogging: true,
                noCookies: true,
                sessionTimeoutInSeconds: 30,
                readyCallback: () => {
                    braze.openSession();
                    updateStatus('‚úÖ Braze Initialized', 'success');
                    document.querySelector('button').disabled = false;
                }
            });

            braze.subscribeToSdkAuthenticationFailures(error => {
                console.error('Auth Error:', error);
                updateStatus(`üîê Auth Failed: ${error.status}`, 'error');
            });
        };

        // Connection Test (keep your existing testConnection function)

        // Add your existing helper functions
    </script>
</body>
</html>
